<app-navbar></app-navbar>
<div class="container mt-5">
  <div class="row">
    <div class="col-md-6">
      <h2>Stauts</h2>
      <div class="form-group">
        <label for="searchRoom">Søg Status:</label>
        <input type="text" class="form-control" id="searchRoom" [(ngModel)]="searchStatus" (input)="filterStatus()">
      </div>
      <table class="table">
        <thead>
          <tr>
            <th>Status</th>
            <th class="text-end">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let status of filteredStatuses">
            <td>{{status.name}}</td>
            <td class="text-end">
              <button class="btn btn-danger btn-sm" (click)="openDeleteModal(status.id)">Slet</button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Modal here -->
      <div class="modal-backdrop" *ngIf="showModal"></div>
      <div
        class="modal"
        tabindex="-1"
        [class.show]="showModal"
        [style.display]="showModal ? 'block' : 'none'"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header bg-danger text-white">
              <h5 class="modal-title">Bekræft sletning</h5>
              <button type="button" class="btn-close" aria-label="Close" (click)="closeModal()"></button>
            </div>
            <div class="modal-body">
              <p *ngIf="hasHistoryWarning" class="text-black">
                Denne status har historik. Er du sikker på, at du vil slette den? Dette sletter al statushistorikken med denne status.
              </p>
              <p *ngIf="!hasHistoryWarning" class="text-black">
                Er du sikker på at du vil slette denne status?
              </p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" (click)="closeModal()">
                Annuller
              </button>
              <button type="button" class="btn btn-danger" (click)="confirmDelete()">
                Slet
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--Create-->
    <div class="col-md-6">
      <div>
        <h2>Opret Stauts</h2>
        <form (ngSubmit)="createStatus()">
          <div class="form-group">
            <label for="name">Status Navn</label>
            <input type="text" class="form-control" id="name" [(ngModel)]="newStatus.name" name="name" />
          </div>
          <button type="submit" class="btn btn-success">Opret</button>
        </form>
      </div>
    </div>
  </div>
</div>
